+++
date = '2025-05-31T10:42:37+08:00'
draft = false
title = 'UI Script Generator Documentation'

+++



# Setup File

## File

* The operation of manually creating a settings file is not necessary, because on each generator activation, the generator goes to the **Editor>UIScriptGenerator** directory to find out if there is an already existing settings file, and if it is not found, it automatically generates a new settings file in that location.
* If you need to create the settings file manually, select **Tools>UI Script Generator>Create Setting** in the menu bar, and the UIScriptGeneratorSetting.asset file will be created in the **Editor>UIScriptGenerator** directory which contains all the setting data needed for the generator.
* The directory where the settings file is saved is fixed, if you move the settings file to another directory, the generator will create another new one in the **Editor>UIScriptGenerator** directory.

## Setting Options

* **Generation Data Save Path**
  * The data associated with generating a UI prefab script is stored in a ScriptObject object with the same name as the prefab, and these ScriptObject objects are stored in this directory.
* **Ui Script Save Path**
  * Storage directory for generated UI scripts.
* **Ui Script Assembly**
  * The assembly where the generated UI scripts are located. This will be used to query for generated script object and automatically add it to the corresponding prefab, if this is set to null no automatic addition will be done.
* **Ui Script Name Space**

  * The namespace where the generated UI script is located. This will be used to query the generated script object and automatically add it to the corresponding prefab. This setting depends on the structure of your project code, the default namespace is “UI”, or null if the UI code generated by your custom generator does not contain a namespace.
* **Ui Panel Base Class Name**

  * The name of the script base class for the UI of the panel type. If this setting is not null, the generated UI script will automatically inherit from the class corresponding to this name. The UIPanelBase in the default setting is used as a base class for the example and serves no other purpose. The script is located at **UIScriptGenerator>Runtime>UIPanelBase.cs**, and can be deleted as appropriate (the name of the base class in the setting should be deleted synchronously as well).
* **Ui Widget Base Class Name**

  * The name of the script base class for the UI of the widget type. If this setting is not null, the generated UI script will automatically inherit from the class corresponding to this name. The UIWidgetBase in the default setting is used as the base class for the example and serves no other purpose. The script is located in the **UIScriptGenerator>Runtime>UIWidgetBase.cs** directory, and can be deleted according to the situation (the name of the base class in the setting should be deleted synchronously as well).
* **Add Suffix**

  * Whether or not to add the abbreviation of the corresponding component name after the variable name. The purpose of this setting is to avoid variable name conflicts when generating variables for multiple components under the same node. Of course, you can also manually modify each variable name to resolve the conflict.
* **SuffixList**

  * List of component name abbreviations. Here you can define the name abbreviation for each component, or use the full name of the component as a suffix if the name abbreviation for a component is not obtained.
* **Components Has Callback**
  * Here you can define components that have callback delegates, such as a Button component with an onClick callback, a Slider component with an onValueChanged callback, and so on.
  * Only components added to this list will show the “Generate Callback Func” option.

# Tutorials

* **Double-click on a UI prefab to enter the prefab editing window**

  * Most of the generator's functionality is based on prefabs, so the generator can only be activated in prefab edit mode. The generator can only be activated in prefab editing mode, and the root node of the prefab must have a RectTransform component added to it, otherwise the generator will not be activated either.

* **Select Tools>UI Script Generator>Enable** in the menu bar.

  * This will activate the generator, you will see two buttons “Exit” and “Save” in the Hierarchy window to the right of the root node of the prefab, which means that the generator has been activated successfully.
  * Clicking the Exit button will exit the generator
  * Clicking the Save button will bring up the Script Generator window.

* **Select any child node **

  * Select any child node, in the Inspector window you can see the RectTransform component below a number of complex options, the format of “口 Generate xxx”, they represent the current node can get the component objects.

* **Check any one of the options**

  * Below that, a text box appears with the text “Variable Name”, which represents the name of the variable that will be used to store the component object in the generated script. You can change the name as you like, but it cannot be empty.
  * The “Generate Callback Func” option also appears if the checked component is registered in **Components Has Callback** of the settings file. If this option is checked, the component's callback function will be generated and automatically added to the callback delegate during script generation. For example, the Button component, named Select, will generate the **OnSelectBtnClick** callback function and add it to the **onClick** delegate.
  * Components and their callback delegates in default settings

  | Component              | Delegates                                                 |
  | ---------------------- | --------------------------------------------------------- |
  | Button                 | onClick                                                   |
  | Slider                 | onValueChanged                                            |
  | Toggle                 | onValueChanged                                            |
  | Dropdown、TMP_Dropdown | onValueChanged                                            |
  | InputField             | onValueChanged、onEndEdit、onSubmit                       |
  | TMP_InputField         | onValueChanged、onEndEdit、onSubmit、onSelect、onDeselect |
  | ScrollRect             | onValueChanged                                            |

* **Save and Generate**

  * After checking all the component options you need for the prefab, click the Save button to bring up the script generation window
  * There are three sections in the window:
    * **UI Script Save Path**: the generated script will be saved to this directory, you can change this directory as you like. It will be saved in the ScriptObject object of the current prefab, and the saved directory will be used when generating the script again.
    * **Generator**: select the generator used to generate the script, different generators may have different generation logic, and the generated script will be different. Two generators are provided by default: UIPanelScriptGenerator, UIWidgetScriptGenerator, which generate panel UI, widget UI scripts respectively. You can also customize the generator, which will automatically appear in the selection list. As with the **UI Script Save Path** Catalog, the selected generator will be saved to the corresponding ScriptObject object of the prefab, and you don't need to select it again for subsequent generation.
    * **Generate**: saves the generated data of the prefab, generates a script file, and automatically adds scripts to the prefab.
  * Two script files will be generated (xxx below is the UI prefab name by default)
    * **xxxBase.cs**: ui script base class which contains variables to store component objects, code to get component objects, and callback functions. This file will be overwritten every time it is generated, so don't make any changes in it.
    * **xxx.cs**: only type define code in this file, you will write business logic in this script. This file will only be created the first time you generate the script and will not be created again after that unless you manually delete the file, so you don't need to worry about the business code being overwritten.
  * Default Generator
    * **UIPanelScriptGenerator**
      * Script for generating UI for panel types, such as backpacks, leaderboards, store, etc. These panels are usually created by the UI manager and control their lifecycle.
    * **UIWidgetScriptGenerator**
      * Scripts used to generate UI of widget types, such as each node displaying items in the backpack panel, each ranking information node in the leaderboard panel, etc. These widget objects are usually created manually by instantiating them when writing business code and controlling their lifecycle in business logic.

* **Start writing business code**

  * Once you have done the above you can start writing business code, you can get and use component variables directly. It is important to note that the component variables in the code generated by the default generator are assigned in the Awake function. In order to make sure that the variables have been assigned, you need to fetch them after the execution of the Awake function has finished, for example, fetching them in the Start function. If you need to do something in the Awake cycle, you can override the OnAwakeEnd function, it will be called after all the variables have been assigned, all your code that needs to be executed in the Awake cycle should be written in this function to make sure all the variables have been assigned.
  * If you check the “Generate Callback Func” option for a component, the delegate callback function for that component will be defined in the base class script, it is a virtual function, so you can override them and write code in them when you write business code. These callback functions are automatically added to the component object's delegate when the base class script gets the component objects, so you don't need to add them manually.

# Customization

## Inspector window

* By default all components use the same drawing class (DefaultDrawer).
* You can customize the drawing style in the Inspector by creating a separate drawing class for each UI component.
*  All drawing classes must inherit from the DrawerBase abstract class, which contains two parts
  * ComponentType：represents the type of UI component handled by the current drawing class, you need to assign a Type type value to it, otherwise the generator won't collect the drawing class.
  * DrawGUI：you need to implement custom drawing logic in this interface, it has two parameters
    * ComponentGenerationData
    * Type
* Once the above steps are completed, no additional action is required, the generator will automatically collect all drawing classes and instantiate them when it is activated.
* Note: A UI component type should only have one custom drawing class, and if there is more than one, only one will be used.

## Generator

* You can create as many custom generators as you want to generate script files for different needs.
* All generator classes must implement the ISCGenerator interface, which has only one function:
  * GenerateScript(UIPrefabGenerationData data, out string baseClassContent, out string uiScriptContent);
* You need to implement the script generation logic in GenerateScript function and return two strings, base class script content, subclass script content, which will be used by the generator to generate the corresponding script file.
* As with the custom Inspector window, there is no need to do anything extra after creating a custom generator class, the generator automatically collects all generator types and instantiates them when it is activated, you can see them in the Generator option of the Generator window.

# Frequently asked questions

## Component options not shown in Inspector after node is selected

The generator checks if the selected node is a child of the prefab and if not, it is not drawn in the Inspector. The prefab used for this check is the resource file in the Project window, not the prefab being edited in the Hierarchy window. If the node you selected is new and has not been saved, the Inspector window will not be drawn. Check Auto Save, or Ctrl+S to manually save, and then reselect the node to fix this problem.

## Modify the position or name of  the node

After modifying the location or name of a node, the generator will automatically refresh the path data of the node when it is activated, but it will not refresh the variable name, in order to prevent the variable name from being used in the script and causing an error. If you need to refresh the variable name, you can uncheck and check the option again, and then the variable name will use the modified node name. After refreshing the path and variable name, you need to generate the script again.

## Child nodes with the same name exist under the same parent node

The code generated by this generator uses the full path to find the node and get the component object of the node at runtime, so it can not recognize the child nodes with the same name under the same parent node, which can be found when the component option is checked (the Inspector drawing information of the nodes with the same name will not be changed because they use the same generated data). So you need to make sure that there are no nodes with the same name in the nodes that have the same parent, otherwise the nodes fetched at runtime may not be the expected nodes and an error will occur.

## Unable to activate generator

Solution：

* Manually disable the generator by selecting **Tools>UI Script Generator>Disable** in the menu bar, and then activate it again.
* Restart the Unity editor.
* Delete the generation data file corresponding to the prefab (same name as the prefab, stored in the directory defined by the **Generation Data Save Path** option in the settings file), then reactivate it.
